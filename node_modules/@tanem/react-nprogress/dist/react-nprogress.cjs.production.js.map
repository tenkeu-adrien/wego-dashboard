{"version":3,"file":"react-nprogress.cjs.production.js","sources":["../compiled/clamp.js","../compiled/createQueue.js","../compiled/createTimeout.js","../compiled/increment.js","../compiled/useEffectOnce.js","../compiled/useGetSetState.js","../compiled/useUpdateEffect.js","../compiled/useNProgress.js","../compiled/NProgress.js","../compiled/withNProgress.js"],"sourcesContent":["export const clamp = (num, lower, upper) => {\n    num = num <= upper ? num : upper;\n    num = num >= lower ? num : lower;\n    return num;\n};\n","export const createQueue = () => {\n    let isRunning = false;\n    let pending = [];\n    const next = () => {\n        isRunning = true;\n        const cb = pending.shift();\n        if (cb) {\n            return cb(next);\n        }\n        isRunning = false;\n    };\n    const clear = () => {\n        isRunning = false;\n        pending = [];\n    };\n    const enqueue = (cb) => {\n        pending.push(cb);\n        if (!isRunning && pending.length === 1) {\n            next();\n        }\n    };\n    return {\n        clear,\n        enqueue,\n    };\n};\n","export const createTimeout = () => {\n    let handle;\n    const cancel = () => {\n        if (handle) {\n            window.cancelAnimationFrame(handle);\n        }\n    };\n    const schedule = (callback, delay) => {\n        let deltaTime;\n        let start;\n        const frame = (time) => {\n            start = start || time;\n            deltaTime = time - start;\n            if (deltaTime > delay) {\n                callback();\n                return;\n            }\n            handle = window.requestAnimationFrame(frame);\n        };\n        handle = window.requestAnimationFrame(frame);\n    };\n    return {\n        cancel,\n        schedule,\n    };\n};\n","import { clamp } from './clamp';\nexport const increment = (progress) => {\n    let amount = 0;\n    if (progress >= 0 && progress < 0.2) {\n        amount = 0.1;\n    }\n    else if (progress >= 0.2 && progress < 0.5) {\n        amount = 0.04;\n    }\n    else if (progress >= 0.5 && progress < 0.8) {\n        amount = 0.02;\n    }\n    else if (progress >= 0.8 && progress < 0.99) {\n        amount = 0.005;\n    }\n    return clamp(progress + amount, 0, 0.994);\n};\n","// Hat-tip:\n// https://github.com/streamich/react-use/blob/master/src/useEffectOnce.ts.\n//\n// `react-use` appears to be unmaintained, so moving the required code into\n// this project for now.\nimport { useEffect } from 'react';\nexport const useEffectOnce = (effect) => {\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(effect, []);\n};\n","// Hat-tip:\n// https://github.com/streamich/react-use/blob/master/src/useGetSetState.ts.\n//\n// `react-use` appears to be unmaintained, so moving the required code into\n// this project for now.\nimport { useCallback, useRef, useState } from 'react';\nconst incrementParameter = (num) => ++num % 1_000_000;\nconst useUpdate = () => {\n    const [, setState] = useState(0);\n    return useCallback(() => setState(incrementParameter), []);\n};\nexport const useGetSetState = (\n/* istanbul ignore next */\ninitialState = {}) => {\n    const update = useUpdate();\n    const state = useRef({ ...initialState });\n    const get = useCallback(() => state.current, []);\n    const set = useCallback((patch) => {\n        if (!patch) {\n            return;\n        }\n        Object.assign(state.current, patch);\n        update();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    return [get, set];\n};\n","// Hat-tip:\n// https://github.com/streamich/react-use/blob/master/src/useUpdateEffect.ts.\n//\n// `react-use` appears to be unmaintained, so moving the required code into\n// this project for now.\nimport { useEffect, useRef } from 'react';\nconst useFirstMountState = () => {\n    const isFirst = useRef(true);\n    if (isFirst.current) {\n        isFirst.current = false;\n        return true;\n    }\n    return isFirst.current;\n};\nexport const useUpdateEffect = (effect, deps) => {\n    const isFirstMount = useFirstMountState();\n    useEffect(() => {\n        if (!isFirstMount) {\n            return effect();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, deps);\n};\n","import { useCallback, useEffect, useRef } from 'react';\nimport { clamp } from './clamp';\nimport { createQueue } from './createQueue';\nimport { createTimeout } from './createTimeout';\nimport { increment } from './increment';\nimport { useEffectOnce } from './useEffectOnce';\nimport { useGetSetState } from './useGetSetState';\nimport { useUpdateEffect } from './useUpdateEffect';\n/* istanbul ignore next */\nconst noop = () => undefined;\nconst initialState = {\n    isFinished: true,\n    progress: 0,\n    sideEffect: noop,\n};\nexport const useNProgress = ({ animationDuration = 200, incrementDuration = 800, isAnimating = false, minimum = 0.08, } = {}) => {\n    const [get, setState] = useGetSetState(initialState);\n    const queue = useRef(null);\n    const timeout = useRef(null);\n    useEffectOnce(() => {\n        queue.current = createQueue();\n        timeout.current = createTimeout();\n    });\n    const cleanup = useCallback(() => {\n        timeout.current?.cancel();\n        queue.current?.clear();\n    }, []);\n    const set = useCallback((n) => {\n        n = clamp(n, minimum, 1);\n        if (n === 1) {\n            cleanup();\n            queue.current?.enqueue((next) => {\n                setState({\n                    progress: n,\n                    sideEffect: () => timeout.current?.schedule(next, animationDuration),\n                });\n            });\n            queue.current?.enqueue(() => {\n                setState({ isFinished: true, sideEffect: cleanup });\n            });\n            return;\n        }\n        queue.current?.enqueue((next) => {\n            setState({\n                isFinished: false,\n                progress: n,\n                sideEffect: () => timeout.current?.schedule(next, animationDuration),\n            });\n        });\n    }, [animationDuration, cleanup, minimum, queue, setState, timeout]);\n    const trickle = useCallback(() => {\n        set(increment(get().progress));\n    }, [get, set]);\n    const start = useCallback(() => {\n        const work = () => {\n            trickle();\n            queue.current?.enqueue((next) => {\n                timeout.current?.schedule(() => {\n                    work();\n                    next();\n                }, incrementDuration);\n            });\n        };\n        work();\n    }, [incrementDuration, queue, timeout, trickle]);\n    const savedTrickle = useRef(noop);\n    const sideEffect = get().sideEffect;\n    useEffect(() => {\n        savedTrickle.current = trickle;\n    });\n    useEffectOnce(() => {\n        if (isAnimating) {\n            start();\n        }\n        return cleanup;\n    });\n    useUpdateEffect(() => {\n        get().sideEffect();\n    }, [get, sideEffect]);\n    useUpdateEffect(() => {\n        if (!isAnimating) {\n            set(1);\n        }\n        else {\n            setState({\n                ...initialState,\n                sideEffect: start,\n            });\n        }\n    }, [isAnimating, set, setState, start]);\n    return {\n        animationDuration,\n        isFinished: get().isFinished,\n        progress: get().progress,\n    };\n};\n","import { useNProgress } from './useNProgress';\nexport const NProgress = ({ children, ...restProps }) => {\n    const renderProps = useNProgress(restProps);\n    return children(renderProps);\n};\n","import hoistNonReactStatics from 'hoist-non-react-statics';\nimport * as React from 'react';\nimport { useNProgress } from './useNProgress';\nexport function withNProgress(BaseComponent) {\n    const WithNProgress = (props) => {\n        const hookProps = useNProgress(props);\n        return React.createElement(BaseComponent, { ...props, ...hookProps });\n    };\n    hoistNonReactStatics(WithNProgress, BaseComponent);\n    return WithNProgress;\n}\n"],"names":["clamp","num","lower","upper","createQueue","isRunning","pending","next","cb","shift","clear","enqueue","push","length","createTimeout","handle","cancel","window","cancelAnimationFrame","schedule","callback","delay","start","frame","time","requestAnimationFrame","increment","progress","amount","useEffectOnce","effect","useEffect","incrementParameter","useUpdate","setState","useState","useCallback","useGetSetState","initialState","undefined","update","state","useRef","_extends","current","patch","Object","assign","useFirstMountState","isFirst","useUpdateEffect","deps","isFirstMount","noop","isFinished","sideEffect","useNProgress","_temp","_ref","_ref$animationDuratio","animationDuration","_ref$incrementDuratio","incrementDuration","_ref$isAnimating","isAnimating","_ref$minimum","minimum","_useGetSetState","get","queue","timeout","cleanup","_timeout$current","_queue$current","set","n","_queue$current4","_queue$current2","_queue$current3","_timeout$current2","_timeout$current3","trickle","work","_queue$current5","_timeout$current4","savedTrickle","NProgress","children","restProps","_objectWithoutPropertiesLoose","_excluded","withNProgress","BaseComponent","WithNProgress","props","hookProps","React","createElement","hoistNonReactStatics"],"mappings":"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"}